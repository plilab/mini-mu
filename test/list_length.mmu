def list_length xs k := 
    xs . [ Nil -> Z . k 
         | List:: x xs' -> xs' [ rest -> S rest . k ] @ list_length ];

run (List:: Z (List:: Z (List:: Z Nil))) Halt @ list_length