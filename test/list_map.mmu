def list_map f xs k :=
  xs . [ Nil -> Nil . k
        | List:: x xs' ->
            do
              y <- f x,
              ys' <- list_map f xs',
            then List:: y ys' . k ];

def inc x k := S x . k;

run list_map @ inc (List:: 2 (List:: 1 (List:: Z Nil))) Halt

